<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="RLT" />


<title>Cherry_Blossum</title>

<script src="site_libs/header-attrs-2.22/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">BIOL4026: Ciencia de Datos</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="Descripcion.html">Home</a>
</li>
<li>
  <a href="B_schedule.html">Calendario</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Instalación básica
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="A1_Instalar-R-RStudio.html">Instalar R y RStudio</a>
    </li>
    <li>
      <a href="A2_Introduccion_RMarkdown.html">RMarkdown</a>
    </li>
    <li>
      <a href="A3_Codigos_basicos_en_R.html">R y Cheatsheets</a>
    </li>
    <li>
      <a href="A4_R_basico.html">R Básico #2</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Los Temas
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="1_Flujo_Trabajo.html">C1 Flujo del Trabajo</a>
    </li>
    <li>
      <a href="2_Visualizacion_Datos.html">C2 Visualización de Datos</a>
    </li>
    <li>
      <a href="3_Flujo_Trabajo_Basico.html">C3 Flujo del Trabajo Básico</a>
    </li>
    <li>
      <a href="4_Transformacion_dplyr.html">C4 Transformación: dplyr</a>
    </li>
    <li>
      <a href="5_Scripts.html">C5 Scripts</a>
    </li>
    <li>
      <a href="6_Analisis_Exploratorio.html">C6 Análisis Exploratorio</a>
    </li>
    <li>
      <a href="7_Pipes.html">C7a Pipes: %&gt;%</a>
    </li>
    <li>
      <a href="7b_Tibbles.html">C7b Tibbles</a>
    </li>
    <li>
      <a href="7c_Importar.html">C7c Importar Datos, readr</a>
    </li>
    <li>
      <a href="8_Datos_Ordenados.html">C8 Datos Ordenados: tidyr</a>
    </li>
    <li>
      <a href="9_Datos_Relacionados.html">C9 Datos Relacionados</a>
    </li>
    <li>
      <a href="10_Stringr.html">C10 Cadenas de Caracteres: stringr</a>
    </li>
    <li>
      <a href="11_Factores.html">C11 Factores: forcats</a>
    </li>
    <li>
      <a href="12_Fechas_Horas.html">C12 Fechas y Horas: lubridate</a>
    </li>
  </ul>
</li>
<li>
  <a href="Datos.html">Datos</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Cherry_Blossum</h1>
<h4 class="author">RLT</h4>
<h4 class="date">4/5/2021</h4>

</div>


<div id="for-the-story-of-cherry-blossum-see" class="section level1">
<h1>For the Story of Cherry Blossum see</h1>
<p><a
href="https://edition.cnn.com/2021/04/05/asia/japan-cherry-blossoms-climate-change-intl-hnk-scn/index.html"
class="uri">https://edition.cnn.com/2021/04/05/asia/japan-cherry-blossoms-climate-change-intl-hnk-scn/index.html</a></p>
<pre class="r"><code>library(tidyverse)</code></pre>
<p>See the following link for an analysis of the time of blossom of the
Cherry Blossom trees in Tokyo, Japan from year 801 to this year.</p>
<p>The objective of this excecise to to put in practice the functions
different files and try and replicate some of the figures that have been
published in newspapers.</p>
<p>See the following websites 1. <a
href="https://edition.cnn.com/2021/04/05/asia/japan-cherry-blossoms-climate-change-intl-hnk-scn/index.html"
class="uri">https://edition.cnn.com/2021/04/05/asia/japan-cherry-blossoms-climate-change-intl-hnk-scn/index.html</a></p>
<ol start="2" style="list-style-type: decimal">
<li></li>
</ol>
<p><a
href="https://www.yahoo.com/gma/numbers-japan-cherry-blossoms-hit-214535221.html"
class="uri">https://www.yahoo.com/gma/numbers-japan-cherry-blossoms-hit-214535221.html</a></p>
<ol start="3" style="list-style-type: decimal">
<li></li>
</ol>
<p><a
href="https://www.meteored.com.ar/noticias/actualidad/sorpresa-en-japon-por-la-temprana-floracion-de-los-cerezos.html"
class="uri">https://www.meteored.com.ar/noticias/actualidad/sorpresa-en-japon-por-la-temprana-floracion-de-los-cerezos.html</a></p>
<p>You will find 4 original files from the authors with the references,
ect.</p>
<ol style="list-style-type: decimal">
<li>759TempW.xls</li>
<li>KyotoFullFlowerW.xls</li>
<li>TempReconsWFinal.xls</li>
<li>CO2_r0.csv</li>
</ol>
</div>
<div id="step-1." class="section level1">
<h1>Step 1.</h1>
<ol style="list-style-type: lower-alpha">
<li>Remove all unnesecary information for each Excel file</li>
<li>Convert files as .csv</li>
</ol>
</div>
<div id="step-2" class="section level1">
<h1>Step 2</h1>
<p>Load files in a RMarkdown document (make certain they are
readible)</p>
</div>
<div id="step-3" class="section level1">
<h1>Step 3</h1>
<div id="points" class="section level2">
<h2>(5 points)</h2>
<p>Merge all three file in one file, “show script and the last 6 lines”
(make it clean, remove unnessary information, not the rows but the
unnessary columns) a. Show the names of tghe columns in the new
dataframe</p>
</div>
</div>
<div id="step-4" class="section level1">
<h1>Step 4</h1>
<div id="points-1" class="section level2">
<h2>(5 points)</h2>
<p>Replace all -999.9 and -99.9 with NA within R. (Do not do this in
Excel, show the script): a. show the head and tail of the new data
frame.</p>
<p>Use the following website to find an appropriate script <a
href="https://cran.r-project.org/web/packages/naniar/vignettes/replace-with-na.html"
class="uri">https://cran.r-project.org/web/packages/naniar/vignettes/replace-with-na.html</a></p>
</div>
</div>
<div id="step-5" class="section level1">
<h1>Step 5</h1>
<div id="and-2-points" class="section level2">
<h2>(3 and 2 points)</h2>
<ol style="list-style-type: lower-alpha">
<li>Calculate the running average of the flowering time for 10 years
prior to time t.</li>
<li>Show the last 10 lines of the data frame</li>
</ol>
</div>
</div>
<div id="step-6" class="section level1">
<h1>Step 6</h1>
<div id="points-2" class="section level2">
<h2>(3 points)</h2>
<ol style="list-style-type: lower-alpha">
<li>Create a point diagram of the date (x axis) and time of “Full
Flowering date DOY”</li>
</ol>
</div>
</div>
<div id="step-7" class="section level1">
<h1>Step 7</h1>
<div id="and-2-points-1" class="section level2">
<h2>(3 and 2 points)</h2>
<ol style="list-style-type: lower-alpha">
<li>Add a linear regression to the above figure</li>
<li>Does this show a pattern of earlier flowering time?</li>
</ol>
</div>
</div>
<div id="step-8" class="section level1">
<h1>Step 8</h1>
<div id="and-2-points-2" class="section level2">
<h2>(2, 3 and 2 points)</h2>
<ol style="list-style-type: lower-alpha">
<li>Now redo the analysis using an analysis called LOESS regression,
this is the default geom_smooth model, geom_smooth().</li>
<li>Explain what LOESS regression model does?<br />
</li>
<li>Now does this show a pattern of change and flowering period?</li>
</ol>
</div>
</div>
<div id="step-9" class="section level1">
<h1>Step 9</h1>
<div id="and-2-points-3" class="section level2">
<h2>(3 and 2 points)</h2>
<p>Using the mean “running average of the day of blossom” you calculated
above. Use 10 year running average. a. Now plot the the rolling average
of Blossom Day (10 year average) on your graph. b. Porque la linea no se
extiende antes del año 1300? comparando al step 7.</p>
</div>
</div>
<div id="step-10" class="section level1">
<h1>Step 10</h1>
<div id="bonus-5-points" class="section level2">
<h2>Bonus (5 points)</h2>
<ol style="list-style-type: lower-alpha">
<li><p>Join the file with the CO2 data and do an analysis to evaluate
the relationship between Average temperature in Tokyo and average CO2
(Rolling average of 10 years).</p></li>
<li><p>Explain how your hypothesis and how this may support or not
evidence for climate change</p></li>
</ol>
</div>
</div>
<div id="imported-files" class="section level1">
<h1>Imported Files</h1>
<pre class="r"><code>library(readr)
X759TempW_mod &lt;- read_csv(&quot;Cherry_Blossom/759TempW_mod.csv&quot;)
F1=X759TempW_mod
head(F1)

KyotoFullFlowerW_mod &lt;- read_csv(&quot;Cherry_Blossom/KyotoFullFlowerW_mod.csv&quot;)
F2=KyotoFullFlowerW_mod
head(F2)

TempReconstWFinal_mod &lt;- read_csv(&quot;Cherry_Blossom/TempReconstWFinal_mod.csv&quot;)
F3=TempReconstWFinal_mod
head(F3)</code></pre>
<p>Join the three files and show the head and tail of the new data
frame</p>
<pre class="r"><code>Cherry_B=F1 %&gt;% 
full_join(F2) %&gt;% 
  full_join(F3)</code></pre>
<pre class="r"><code>Cherry_B</code></pre>
</div>
<div id="remove-the--999.9-and--99.9." class="section level1">
<h1>Remove the -999.9 and -99.9.</h1>
<p>and show the head and tail of the new data frame</p>
<pre class="r"><code>library(naniar)
CB=Cherry_B %&gt;% 
replace_with_na(replace = list(TEMP = c(-999.9),
                             Obs_Temp = c(-999.9),
                             Temp_3_31= c(-99.99),
                             Temp_3_31_1 = c(-99.99),
                             TemP_3_22 = c(-99.99),
                             Conf_CI_low = c(-99.99),
                             Conf_CI_High = c(-99.99)))
head(CB)</code></pre>
</div>
<div
id="create-a-point-diagram-of-the-date-x-axis-and-time-of-full-flowering-date-doy"
class="section level1">
<h1>Create a point diagram of the date (x axis) and time of “Full
Flowering date DOY”</h1>
<pre class="r"><code>ggplot(CB, aes(AD, Full_flow_date_DOY))+
  geom_point()</code></pre>
</div>
<div id="add-a-linear-regression-to-the-above-figure"
class="section level1">
<h1>Add a linear regression to the above figure</h1>
<p>Does this show a pattern of earlier flowering time?</p>
<pre class="r"><code>ggplot(CB, aes(AD, Full_flow_date_DOY))+
  geom_point()+
  geom_smooth(method=&quot;lm&quot;)</code></pre>
<p>Now redo the analysis using an analysis of LOESS, the default
geom_smooth model. Explain hat LOESS egression model does? Now does this
show a pattern of change and flowering period?</p>
<pre class="r"><code>ggplot(CB, aes(AD, Full_flow_date_DOY))+
  geom_point()+
  geom_smooth()</code></pre>
</div>
<div
id="calculate-the-mean-running-average-of-the-day-of-blossom.-use-10-year-running-average."
class="section level1">
<h1>Calculate the mean “running average of the day of blossom”. Use 10
year running average.</h1>
<pre class="r"><code>names(CB)
library(zoo)
CB=CB %&gt;% 
  mutate(RAB = rollmean(Full_flow_date_DOY, k = 10, fill = NA))</code></pre>
</div>
<div
id="now-plot-the-the-rolling-blossom-day-10-year-average-on-your-graph"
class="section level1">
<h1>Now plot the the rolling Blossom Day (10 year average) on your
graph</h1>
<p>Por que la linea no se extiende antes del año 1300</p>
<pre class="r"><code>ggplot(CB, aes(AD, Full_flow_date_DOY))+
  geom_point()+
  geom_smooth(aes(AD, RAB))</code></pre>
<pre class="r"><code>library(readr)
CO2_Yr0 &lt;- read_csv(&quot;Cherry_Blossom/CO2_Yr0.csv&quot;)


CB=CB %&gt;% 
  right_join(CO2_Yr0 , c(&quot;AD&quot; = &quot;year&quot;))</code></pre>
<p>Do a figure showing the relationship between mean global Co2
concentration and time of flowering. What does the patern show?.</p>
<pre class="r"><code>ggplot(CB, aes(data_mean_global_CO2, Full_flow_date_DOY))+
  geom_point()+
  geom_smooth()</code></pre>
<p>Now do a figure showing the mean average temperature (10 year running
average) and C02 concentration. To calculate the mean running average of
the temparature use the following variable, Temp_3_31_1. (which is the
mean march temperature).</p>
<pre class="r"><code>CB</code></pre>
<pre class="r"><code>names(CB)
library(zoo)
CB=CB %&gt;% 
  mutate(RAT = rollmean(Temp_3_31_1, k = 10, fill = NA))


ggplot(CB, aes(data_mean_global_CO2, RAT))+
  geom_point()+
  geom_smooth()</code></pre>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
