---
title: "C_4_E5_I3_Transformacion_dplyr"
subtitle: "BIOL4026"
author: "Raymond L. Tremblay"

output:
  html_document:
    css: tutorial.css
    fig_caption: yes
    highlight: pygments
#    theme: simplex
    toc: yes
    toc_float: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning=FALSE, message = FALSE)
```

```{=html}
<style>
.list-group-item.active, .list-group-item.active:focus, .list-group-item.active:hover {
    background-color: #11c1d9;
}
</style>
```


Fecha de la ultima revisión
```{r echo=FALSE}

Sys.Date()
```

***


El tema proviene de los siguientes sitios.

English:
 <https://r4ds.had.co.nz/transform.html>
 
Español:
 <https://r4ds-en-espaniol.netlify.app/transform.html>
 
 
***


## Temas: Reconocer y aplicar las diferentes funciones

- Tipos de variables:
  
    - int
    - dbl
    - chr
    - dttm
    - lgl
    - fctr
    - date
 
 *** 
- Funciones de dplyr:
  
   - filter()
   - arrange()
   - select()
   - summarize()
   - group_by()
   
***  
- Operaciones lógicas boolean:
  
   - &
   - "|"
   - !
   - %in%
   - ==
   - "<"
   - ">"
   
 
***

1. **Ejercicios**:

 Hacer los ejercicios en la sección 5.2.4 del libro en español

5.2.4 Ejercicios
 - Encuentra todos los vuelos que:

 - Tuvieron un retraso de llegada de dos o más horas

 - Volaron a Houston (IAH oHOU)

 - Fueron operados por United, American o Delta

 - Partieron en invierno del hemisferio sur (julio, agosto y septiembre)

 - Llegaron más de dos horas tarde, pero no salieron tarde

 - Se retrasaron por lo menos una hora, pero repusieron más de 30 minutos en vuelo

 - Partieron entre la medianoche y las 6 a.m. (incluyente)

 - Otra función de dplyr que es útil para usar filtros es between(). ¿Qué hace? ¿Puedes usarla para simplificar el código necesario para responder a los desafíos anteriores?

 - ¿Cuántos vuelos tienen datos faltantes en horario_salida? ¿Qué otras variables tienen valores faltantes? ¿Qué representan estas filas?

***


Use data from a link on the web

```{r}
library(tidyverse)
library(data.table)
url<-fread("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/vaccinations/us_state_vaccinations.csv")
head(url)
```
  
*** filter for  Puerto Rico only

```{r}
url %>% 
  filter(location=="Puerto Rico")
```



```{r}
url_COVID=fread("https://covid.ourworldindata.org/data/owid-covid-data.csv")
head(url_COVID)

head(unique(url_COVID$location))

url_COVID %>% 
  filter(location=="United States")
```


COVID_PR

```{r}
url_COVID_PR=fread("https://raw.githubusercontent.com/rafalab/pr-covid/master/dashboard/data/DatosMortalidad.csv")

names(url_COVID_PR)
head(url_COVID_PR)
tail(url_COVID_PR)
```


***

- Otra función

  - desc()
   

***

2. **Ejercicios**:

Hacer los ejercicios en la sección 5.3.1 del libro en español

***

- Otras funciones:

  - starts_with()
  - ends_with()
  - contains()
  - matches("(.)\\1")
  - rename()
  - everything()
 
 
***

3.  **Ejercicios**:

Hacer los ejercicios en la sección 5.4.1 del libro en español

***

- Otras funciones:
 
  - mutate()
  - transmute()
  - lag()
  - lead()
  - cumsum()
  - cummean()
  - min_rank()
  - max_rank(desc())
  - row_number()
  - dense_rank()
  - percent_rank()
  - cume_dist()
  
  
***

4.  **Ejercicios**:

Hacer los ejercicios en la sección 5.5.2 del libro en español

***

- Otras funciones:

 - summarise()
 - group_by()
 

***

5.  **Ejercicios**:

Hacer los ejercicios en la sección 5.6.7 del libro en español

***

- Otras funciones:

  - %>%  "El pipe"
 

***

- Otras funciones:
 
  - na.rm=TRUE
  - !is.na()
 

***

- Otras funciones:

  - mean()
  - sd()
  - IQR()
  - mad()
  - min()
  - max()
  - first()
  - last()
  
  
***

1.  **Ejercicios**:


Hacer los ejercicios en la sección 5.7.1 del libro en español

***
 
 
 
 
   

    